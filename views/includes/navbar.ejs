<style>
  .search-btn{
    background-color: #fe424d;
    color: #fff;
    border-radius: 25px;
    padding: 0 1rem 0 1rem ;
  }
  .search-btn:hover{
    background-color: #fe424d;
    color: #fff;
  }
  .search-btn i{
    display: inline;
    margin-right: 0.5rem;
  }
  .search-input{
    border-radius: 25px;
    padding: 0.5rem 3rem 0.5rem 3rem;
  }
  .userIcon{
    font-size: 2rem;
    cursor: pointer;
  }
  .user-dropdown-container {
    position: relative;
    display: inline-block;
  }

  .username-dropdown {
    display: none;
    position: absolute;
    top: 110%; /* below the icon */
    left: 50%;
    transform: translateX(-50%);
    background-color: #fff;
    color: #333;
    padding: 6px 12px;
    border-radius: 4px;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
    white-space: nowrap;
    font-size: 14px;
    z-index: 999;
  }


</style>
<nav class="navbar navbar-expand-md bg-body border-bottom sticky-top">
    <div class="container-fluid">
      <a class="navbar-brand" href="/listings"><img src="/vistada_white_icon.png" class="nav-icon"></a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
        <div class="navbar-nav">
          <a class="nav-link" href="/listings">Explore</a>
        </div>
        <div class="navbar-nav ms-auto">
          <form class="d-flex" role="search">
            <input class="form-control me-2 search-input" type="search" placeholder="Search destinations">
            <button class="btn search-btn" type="submit"><i class="fa-solid fa-magnifying-glass"></i>Search</button>
          </form>
        </div>
        <div class="navbar-nav ms-auto">
          
          <a class="nav-link" href="/listings/new">Visdata your home</a>
          <% if(!currUser) {%>
            <a class="nav-link" href="/signup"><b>SignUp</b></a>
            <a class="nav-link" href="/login"><b>Login</b></a>
          <% }%>
          <% if(currUser){ %>
            <div class="user-dropdown-container">
              <i id="userIcon" class="nav-link fa-regular fa-circle-user userIcon"></i>
              <div id="dropdown" class="username-dropdown"><%= currUser.username %></div>
            </div>
            <a class="nav-link" href="/logout"><b>Logout</b></a>
          <% }%>
        </div>
      </div>
    </div>
  </nav>

  <script>
    const icon = document.getElementById("userIcon");
    const dropdown = document.getElementById("dropdown");
  
    if (icon && dropdown) {
      icon.addEventListener("mouseenter", () => {
        dropdown.style.display = "block";
      });
  
      icon.addEventListener("mouseleave", () => {
        // Delay hiding to allow moving to the dropdown
        setTimeout(() => {
          if (!dropdown.matches(":hover")) {
            dropdown.style.display = "none";
          }
        }, 150);
      });
  
      dropdown.addEventListener("mouseleave", () => {
        dropdown.style.display = "none";
      });
  
      dropdown.addEventListener("mouseenter", () => {
        dropdown.style.display = "block";
      });
    }
  </script>
  
  